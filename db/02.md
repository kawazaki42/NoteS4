читать начинаем с крайних и однократных сущностей (т.н. справочные)

т.е. без "входящих вилочек"


а потом на те у которых 2 и более - она делает связь many-to-many

```
id_order_line(pk)  id_order(fk)(uq)  id_pizza(fk)  quantity
1                  1                 1             2
2                  1                 2             1
3                  1                 3             1
4                  1                 1             3
```

sum(price * quantity)

внешние ключи - только в _операционных_ таблицах

---

Реляционная модель данных.
Структура данных
===

от слова _relation_

основная структура: плоская далбица

столбцы называются атрибуты/поля/просто столбцы

строки: aka кортежи, записи

```csv
id_student(pk),surname,name,birthday,avg,hobby,gr_name(fk)(uq)
1,иванов,И,,,music,
2,петров,П,,,,ИВТ-24
3,сидоров,С,,,,ИВТ-23
1,иванов,И,,,games,ИВТ-24
```

ячейки атомарны

Вспоминаем декартово произведение множеств:
- (1, Иванов, И, null, null, music)
- (1, Петров, И, null, null, music)
- ...

---

- тк наша табличка это подмножество, нельзя хранить одинаковые строки
- и строки сами по себе __не имеют__ порядка
- атрибуты тоже не имеют порядка, только имя

Потенциальный ключ (Unique) - это атрибут 1 или неск., которые не избыточны
и однозначно идентифицируют строку

есть простые и составные

Первичный ключ (Primary Key) - это один из потенциальных ключей
он тоже не избыточен, тоже однозначно определяет и всегда не пустой

связь - это просто два совпадающих атрибута в разных таблицах (по сути)

```csv
name,sud_count
ИВТ-24,20
ИВТ-23,30
```

внешние ключи - на стороне множества

можно скрыть реализацию при помощи связи 1-1

## __Эксклюзивные подкатегории__

две сущности которые имеют сходства и различия

- object(id, name, circle)
- triangle(id, coords...)
- окружность(id, x0, y0, R)

один к одному

так тоже можно, но неудобно:

```csv
id,name,type,x1,y1,x2,y2,r
1,c1,circle,0,0,null,null,100
2,t1,line,0,0,1,1,null
```

а вообще проще сделать json

---

fk(id, gr_name)

Неидентифицирующая связь

Идентифицирующая: pk+fk

```csv
id_student(pk),surname,name,birthday,avg,hobby,gr_name(fk)(pk)
1,петров,П,,,,ИВТ-24
2,сидоров,С,,,,ИВТ-24
3,федоров,С,,,,ИВТ-24
1,борисов,С,,,,ИВТ-23
2,павлов,С,,,,ИВТ-23
```

т.н. операционные таблицы привязанные к времени

```csv
id_сдачи,id_студента(pk),дата(pk),предмет,оценка
1,1,21.02.2026,БД,5
```

удобнее конечно отдельный id

## Иерархическая связь

- 1
  - 2
    - 4
    - 5
      - 6
  - 3
    - 7

people
id,name,job,parent_id
1,p1,,null
2,p2,,1
3,p3,,1
4,p4,,2
5,p5,,2
6,p6,,5
7,p7,,3

## Many-to-many

реализуется через две one-to-many

а таблица может и 3 колонки иметь

многозначные связи
